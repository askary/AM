<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Captura</title>
<script type="text/javascript" charset="utf-8" src="cordova.js"></script>
<link href="themes/tema-personalizado.min.css" rel="stylesheet" type="text/css">
<link href="jquery.mobile-1.4.0/jquery.mobile.icons-1.4.0.min.css" rel="stylesheet" type="text/css">
<link href="jquery.mobile-1.4.0/jquery.mobile.structure-1.4.0.min.css" rel="stylesheet" type="text/css">
<script src="jquery.mobile-1.4.0/jquery-1.10.2.min.js" type="text/javascript"></script>
<script type="text/javascript">
$( document ).on( "mobileinit", function() {
  $.mobile.pageLoadErrorMessage = "Error al cargar la página";
  $.mobile.pageLoadErrorMessageTheme = "a"; 
});
</script>
<script src="jquery.mobile-1.4.0/jquery.mobile-1.4.0.min.js" type="text/javascript"></script>
<script type="text/javascript">

document.addEventListener("deviceready", onDeviceReady, false);

function onDeviceReady() {
    console.log(" ****	Dispositivo Listo	**** ");
}
</script>
</head>

<body>
<div data-role="page" id="captura"> 
  <script type="text/javascript">

function capturaExitosa(archivos){
	var i,cantidad;
	for(i=0, cantidad = archivos.length; i < cantidad; i+=1){
		procesarArchivo(archivos[i]);
		}	
	}

function errorCaptura(msj){
	$("#error").append('<p>Error: </p>' + msj.code);
	}
	
function capturarAudio(){
	navigator.device.capture.captureAudio(capturaExitosa, errorCaptura, { limit : 2 });
	}
	
function capturarImagenes(){
	navigator.device.capture.captureImage(capturaExitosa, errorCaptura, { limit : 2 });
	}	
	
function capturarVideo(){
	navigator.device.capture.captureVideo(capturaExitosa, errorCaptura, { limit : 2 });
	}	
	
	function procesarArchivo(archivo){
	var nombre = archivo.name;
	alert("Capturado : " + nombre);
	}

</script>
  <div data-role="header">
    <h1>Captura Multimedia</h1>
  </div>
  <div data-role="content">

    <h2>¿Qué deseas Capturar?</h2>
    <br>
    <div data-inline="true">
      <button data-inline="true" onClick="capturarImagenes();">Imagen</button>
      <button data-inline="true" onClick="capturarAudio();">Audio</button>
      <button data-inline="true" onClick="capturarVideo();">Video</button>
    </div>
    <div id="error" ></div>
  </div>
</div>
</body>
</html>
